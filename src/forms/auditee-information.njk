{%- extends "form.njk" -%}

{%- block form -%}
<div class="grid-container">
  {{
    component('usa-step-indicator', {
      currentStep: 2,
      totalSteps: 4
    })
  }}
</div>
<div class="grid-container auditee-information">
  <div class="grid-row">
    <form class="usa-form usa-form--large tablet:grid-col" id="check-eligibility" data-fy-end-date="">
      <fieldset class="usa-fieldset">
        <legend class="usa-legend usa-legend--large">Auditee information</legend>
        <p>
          <abbr
            title="required"
            class="usa-hint usa-hint--required"
            >*</abbr
          >Indicates a required field.
        </p>

        <div id="no-uei-warning" hidden>
          <h2>
            <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
              <use xlink:href="{{config.baseUrl}}assets/img/sprite.svg#error_outline"></use>
            </svg>
            Your UEI was not confirmed
          </h2>
            <p>You  can continue, but you will have to confirm your UEI before you’re submission can be certified.
  You will be able to update the UEI later on.</p>
        </div>

          <p class="uei-explanation">Search by Unique Entity Identifier (UEI) for your entity name in the SAM.gov database.</p>
          {{
            component('usa-search', {
              id: 'auditee_uei',
              baseUrl: config.baseUrl,
              validations: uei_search.validations,
              controlsModal: 'uei-search-result',
              required: true
            })
          }}

          <p class="uei-explanation">Don’t know your UEI? You can find your UEI or register for a new UEI by visiting <a href="https://sam.gov/">SAM.gov</a>.</p>

        {% for i in inputs %}
          {% if i.field_type == "text" %}
            {{
              component('usa-input', {
                label: i.label,
                id: i.id,
                required: i.required,
                errorMessage: i.error_message,
                validations: i.validations,
                disabled: i.disabled
              })
            }}
          {% elif i.field_type == "date" %}
          <div class="usa-form-group validate-fy">
            {% if i.id == "auditee_fiscal_period_start" %}
            <ul class="usa-error-message"
              id="fy-error-message"
              role="alert"
              tabindex="-1"
              >
            </ul>
            {% endif %}
            {{
              component('usa-date-picker', {
                label: i.label,
                id: i.id,
                required: i.required,
                errorMessage: i.error_message,
                validations: i.validations
              })
            }}
          </div>
          {% endif %}
        {% endfor %}
        </fieldset>
        <ul class="usa-button-group">
          <li class="usa-button-group__item">
            <a href="javascript:void(0);" class="usa-button usa-button--outline">
              Cancel
            </a>
          </li>
          <li class="usa-button-group__item">
            <button class="usa-button" id="continue">Continue</button>
          </li>
        </ul>
    </form>
    <div class="ueid-explanation tablet:grid-col usa-prose font-sans-sm">
      <h2>{{ explanatory_text.heading }}</h2>
      <p>{{ explanatory_text.explanation }}</p>
      <ul>
      {% for gloss in explanatory_text.gloss %}
        <li>{{ gloss }}</li>
      {% endfor %}
      </ul>
      <h2>{{ explanatory_text.subheading }}</h2>
      <p>{{ explanatory_text.more }}</p>
    </div>
  </div>
<script>const authToken = "{{ config.temporaryAuthToken }}"</script>
<script src="{{ config.baseUrl }}assets/js/check-ueid.js"></script>

  <div
    class="usa-modal usa-modal--lg uei-search-result loading"
    id="uei-search-result"
    aria-labelledby="uei-search-result-heading"
    aria-describedby="uei-search-result-description"
  >
    <div class="usa-modal__content">
      <div class="usa-modal__main">
        <img src="{{ config.baseUrl }}assets/img/loader.svg" alt="loading">
        <h2 class="usa-modal__heading" id="uei-search-result-heading">
        </h2>
        <div class="usa-prose" id="uei-search-result-description">
        </div>
        <div class="usa-modal__footer">
          <ul class="usa-button-group">
            <li class="usa-button-group__item">
              <button type="button" class="usa-button primary" data-close-modal>
              </button>
            </li>
            <li class="usa-button-group__item">
              <button
                type="button"
                class="usa-button usa-button--unstyled padding-105 text-center secondary"
                data-close-modal
              >
              </button>
            </li>
          </ul>
        </div>
      </div>
      <button
        class="usa-button usa-modal__close"
        aria-label="Close this window"
        data-close-modal
      >
        <svg class="usa-icon" aria-hidden="true" focusable="false" role="img">
          <use xlink:href="/assets/img/sprite.svg#close"></use>
        </svg>
      </button>
    </div>
  </div>

</div>

{%- endblock -%}
